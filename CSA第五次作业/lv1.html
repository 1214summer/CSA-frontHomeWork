<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .light {
            width: 100px;
            height: 300px;
            margin: 100px auto;
            border: 2px solid #aaa;
        }

        .light>* {
            width: 100px;
            height: 100px;
            border-radius: 50px;
        }
    </style>
</head>

<body>
    <div class="light">
        <div class="red"></div>
        <div class="green"></div>
        <div class="yellow"></div>
    </div>
    <script>
        const redlight = document.querySelector('.red')
        const greenlight = document.querySelector('.green')
        const yellowlight = document.querySelector('.yellow')
        let light = {
            red: function () {
                redlight.style.backgroundColor = 'red'
            },
            green: function () {
                greenlight.style.backgroundColor = 'green'
            },
            yellow: function () {
                yellowlight.style.backgroundColor = 'yellow'
            }
        }
        //清空样式
        function closeLight() {
            redlight.style.backgroundColor = '#fff'
            greenlight.style.backgroundColor = '#fff'
            yellowlight.style.backgroundColor = '#fff'
        }


        // 1.setTimeout定时器嵌套
        // const main = () => {
        //     setTimeout(() => {
        //         closeLight()
        //         setTimeout(() => {
        //             light.red()
        //             setTimeout(() => {
        //                 light.green()
        //                 setTimeout(() => {
        //                     light.yellow()
        //                 }, 1000)
        //             }, 1000)
        //         }, 1000)  
        //     }, 1000)
            
        // }
        // main()
        // 2.Promise链式回调
        const traffic_light=(light,delay)=>{
            return new Promise((light,reject)=>{
                setTimeout(()=>{
                    light()
                },delay)
            })
        }
        // const main=()=>{
        //     Promise.resolve()
        //     .then(()=>{
        //         return traffic_light(light.red(),1000)
        //     })
        //     .then(()=>{
        //         return traffic_light(light.green(),1000)
        //     })
        //     .then(()=>{
        //         return traffic_light(light.yellow(),1000)
        //     })
        //     .then(()=>{
        //         main();
        //     })
        // }
        // main()

    </script>
</body>

</html>